(this["webpackJsonpgoogle-attendance"]=this["webpackJsonpgoogle-attendance"]||[]).push([[0],{115:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var a=n(6),o=n(1),c=n.n(o),s=n(10),i=n.n(s),r=(n(115),n(19)),l=n(14),d=n(84),u=c.a.createContext(),j=function(e){var t=e.children,n=Object(d.useGoogleLogin)({clientId:"778190995266-knmp3uuhepkci2icmtfasoevob43827f.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.rosters.readonly"});return Object(a.jsx)(u.Provider,{value:n,children:t})},h=function(){return c.a.useContext(u)},g=n.p+"static/media/googleIcon.ccedd067.png",m=n(48),b=n.n(m),p=function(){var e=h().signIn;return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsxs)("div",{className:b.a.Login,children:[Object(a.jsx)("h3",{children:"Let's get started"}),Object(a.jsx)("span",{style:{color:"gray"},children:"Log in to view attendance records for your Google Classroom"}),Object(a.jsxs)("div",{className:b.a.Button,onClick:e,children:[Object(a.jsx)("div",{className:b.a.GoogleImgContainer,children:Object(a.jsx)("img",{className:b.a.GoogleImg,src:g,alt:"googleLogo"})}),Object(a.jsx)("span",{children:"Login with Google"})]})]}),Object(a.jsx)("span",{className:b.a.Tag,children:"Built by Ryan Castriotta"})]})},O={APIKEY:"AIzaSyCMjGr5TUHvrvREISD6DxzhOlo6ysPk5HQ"},x=n(39),f=n.n(x),v=n(94),_=n(198),y=n(191),T=n(192),w=n(85),C=n.n(w),N=n(43),k=n(86),D=n(56),I=n.n(D),S=n(24),L=n.n(S),B=function(e){var t=Object(o.useState)([]),n=Object(r.a)(t,2),s=n[0],i=n[1],l=Object(o.useState)(!1),d=Object(r.a)(l,2),u=d[0],j=d[1],g=h().googleUser.accessToken,m=h().googleUser.googleId,b=h().googleUser.profileObj.givenName,p=c.a.useState(null),x=Object(r.a)(p,2),w=x[0],D=x[1],S=h().signOut,B=h().refreshUser;Object(o.useEffect)((function(){j(!0),f.a.get("https://content-classroom.googleapis.com/v1/courses?courseStates=ACTIVE&key=".concat(O.APIKEY),{headers:{authorization:"Bearer "+g}}).then((function(e){j(!1);var t=e.data.courses.filter((function(e){return e.ownerId===m}));i(t)})).catch((function(e){e.toString().includes("401")&&B(),j(!1)}))}),[g,m,e.history,B]);return Object(a.jsxs)("div",{className:L.a.Home,children:[Object(a.jsxs)("div",{className:L.a.NameContainer,children:[Object(a.jsxs)("div",{style:{marginLeft:"50px"},children:[Object(a.jsxs)("h2",{children:["Hello, ",b]}),Object(a.jsxs)("div",{className:L.a.Total,children:[Object(a.jsx)("p",{children:"ACTIVE CLASSES"}),Object(a.jsx)("div",{className:L.a.Divider}),Object(a.jsxs)("h4",{style:{color:"rgba(94, 129, 244, 1)"},children:[s.length," total"]})]})]}),Object(a.jsx)("div",{className:L.a.Ellipse,onClick:function(e){D(e.currentTarget)},children:Object(a.jsx)(k.a,{color:"rgba(94, 129, 244, 1)",size:30,style:{}})}),Object(a.jsx)(v.a,{id:"simple-menu",anchorEl:w,keepMounted:!0,open:Boolean(w),onClose:function(){D(null)},children:Object(a.jsx)(_.a,{onClick:S,style:{color:"rgba(94, 129, 244, 1)",fontFamily:"averta-bold"},children:"Logout"})})]}),!u&&Object(a.jsxs)(y.a,{cellHeight:160,cols:4,className:L.a.Tiles,padding:20,spacing:0,style:{overflow:"visible"},children:[s.map((function(t){return Object(a.jsxs)(T.a,{cols:1,className:L.a.Tile,onClick:function(){return e.history.push("/courses/".concat(t.id))},children:[Object(a.jsxs)("div",{className:L.a.TileTop,children:[Object(a.jsx)("h3",{children:t.name}),Object(a.jsxs)("div",{className:L.a.Date,children:[Object(a.jsx)("p",{style:{color:"gray"},children:"Created"}),Object(a.jsx)("div",{className:L.a.Divider}),Object(a.jsx)("p",{style:{color:"rgba(94, 129, 244, 1)"},children:C()(t.creationTime)})]})]}),Object(a.jsx)("div",{className:L.a.TileBottom,children:Object(a.jsxs)("div",{className:L.a.ViewAttendance,children:[Object(a.jsx)("span",{children:"View attendance"}),Object(a.jsx)(N.b,{color:"rgba(94, 129, 244, 1)",size:25,style:{marginLeft:"10px",marginRight:"20px"}})]})})]},t.id)})),Object(a.jsx)("div",{style:{height:"50px"}})]}),u&&Object(a.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(a.jsx)(I.a,{type:"TailSpin",color:"rgba(94, 129, 244, 1)",height:"100px",width:"100px",style:{marginTop:"200px"}})})]})},Y=n(53),E=n.n(Y),P=n(65),A=n(92),H=n(17),G=n(193),V=n(54),z=n.n(V),M=n(49),F=n.n(M),K=n(40),U=n.n(K),W=function(e){var t=0;return Object(a.jsxs)("div",{className:U.a.Panel,children:[Object(a.jsxs)("div",{className:U.a.Top,children:[Object(a.jsxs)("div",{className:U.a.Title,children:[Object(a.jsx)("h3",{children:e.title}),Object(a.jsx)(N.c,{color:"rgba(94, 129, 244, 1)",size:25})]}),Object(a.jsxs)("span",{style:{color:"gray"},children:[e.students.length," total"]})]}),Object(a.jsxs)("div",{className:U.a.Bottom,children:[!e.loading&&Object(a.jsx)("div",{className:U.a.List,children:e.students.map((function(e){return t++,Object(a.jsxs)("div",{className:U.a.ListItem,children:[Object(a.jsx)("span",{style:{fontFamily:"averta-bold"},children:e}),Object(a.jsx)("span",{style:{color:"rgba(94, 129, 244, 1)"},children:t})]},Math.random())}))}),e.loading&&Object(a.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:Object(a.jsx)(I.a,{type:"TailSpin",color:"rgba(94, 129, 244, 1)",height:"100px",width:"100px",style:{marginTop:"50px"}})}),e.noAssignments&&Object(a.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:"70px",marginLeft:"50px",marginRight:"50px",textAlign:"center"},children:Object(a.jsx)("span",{children:"You've posted no attendance related assignments for this class today."})})]})]})},R=function(e){var t=window.location.pathname.split("courses/")[1],n=h().googleUser.accessToken,c=Object(o.useState)([]),s=Object(r.a)(c,2),i=s[0],l=s[1],d=Object(o.useState)([]),u=Object(r.a)(d,2),j=u[0],g=u[1],m=Object(o.useState)("...Loading"),b=Object(r.a)(m,2),p=b[0],x=b[1],v=Object(o.useState)(!0),_=Object(r.a)(v,2),y=_[0],T=_[1],w=Object(o.useState)(!1),C=Object(r.a)(w,2),k=C[0],D=C[1],I=Object(o.useState)(!1),S=Object(r.a)(I,2),L=S[0],B=S[1],Y=Object(o.useState)(z()(new Date).format("MM/DD/YYYY")),V=Object(r.a)(Y,2),M=V[0],K=V[1],U=Object(o.useState)([]),R=Object(r.a)(U,2),J=R[0],Q=R[1],q=h().refreshUser,Z=function(e,t){return z()(e).format("MM/DD/YYYY")===z()(t).format("MM/DD/YYYY")},X=function(e){for(var t={},n=[],a=0;a<e.length;a++)t[e[a]]=!0;for(var o in t)n.push(o);return n},$=Object(o.useCallback)((function(e){Object(P.a)(E.a.mark((function a(){var o,c,s,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,T(!0),B(!1),D(!1),o=[],c=[],a.next=8,f.a.get("https://classroom.googleapis.com/v1/courses/".concat(t,"/courseWork?courseWorkStates=PUBLISHED&key=").concat(O.APIKEY),{headers:{authorization:"Bearer "+n}}).then((function(t){t.data.courseWork.forEach((function(t){if("dueDate"in t&&"dueTime"in t&&Z(new Date(t.creationTime),e)){var n=new Date(t.creationTime),a=t.dueTime.hours;1===a.toString().length&&(a="0".concat(a));var o=new Date("".concat(t.dueDate.year,"-").concat(t.dueDate.month,"-").concat(t.dueDate.day,"T").concat(a,":").concat(t.dueTime.minutes,":00.000Z"));Z(n,o)&&c.push(t)}}))}));case 8:if(0!==c.length){a.next=14;break}return B(!0),T(!1),g([]),l([]),a.abrupt("return");case 14:return a.next=16,Promise.all(c.map(function(){var e=Object(P.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://classroom.googleapis.com/v1/courses/".concat(t,"/courseWork/").concat(a.id,"/studentSubmissions?key=").concat(O.APIKEY),{headers:{authorization:"Bearer "+n}}).then((function(e){var t,n=[];e.data.studentSubmissions.forEach((function(e){"late"in e||n.push(e.userId)})),(t=o).push.apply(t,n)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 16:o=X(o),s=[],i=[],c.length>0&&J.forEach((function(e){o.filter((function(t){return t===e.profile.id})).length>0?s.push("".concat(e.profile.name.familyName,", ").concat(e.profile.name.givenName)):i.push("".concat(e.profile.name.familyName,", ").concat(e.profile.name.givenName))})),g(s),l(i),T(!1),a.next=31;break;case 25:a.prev=25,a.t0=a.catch(0),a.t0.toString().includes("401")&&q(),console.log(a.t0),T(!1),D(!0);case 31:case"end":return a.stop()}}),a,null,[[0,25]])})))()}),[t,n,q,J]);return Object(o.useEffect)((function(){J.length>0||"...Loading"!==p||(f.a.get("https://classroom.googleapis.com/v1/courses/".concat(t,"?key=").concat(O.APIKEY),{headers:{authorization:"Bearer "+n}}).then((function(e){x(e.data.name)})),f.a.get("https://classroom.googleapis.com/v1/courses/".concat(t,"/students?key=").concat(O.APIKEY),{headers:{authorization:"Bearer "+n}}).then((function(e){Q(e.data.students),$(new Date)})))}),[n,t,$,p,J.length]),Object(a.jsxs)("div",{className:F.a.CourseView,children:[Object(a.jsxs)("div",{className:F.a.TopContainer,children:[Object(a.jsxs)("div",{className:F.a.GoBack,onClick:function(){return e.history.goBack()},children:[Object(a.jsx)(N.a,{color:"rgba(94, 129, 244, 1)",size:30,style:{marginRight:"10px"}}),Object(a.jsx)("span",{children:"Go back"})]}),Object(a.jsx)("h2",{children:k?"Error loading content":p}),Object(a.jsx)("div",{className:F.a.Placeholder,children:Object(a.jsx)(H.a,{utils:A.a,children:Object(a.jsx)(G.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",value:M,disableFuture:!0,onChange:function(e){y||(K(z()(e).format("MM/DD/YYYY")),$(new Date(e)))},KeyboardButtonProps:{"aria-label":"change date"}})})})]}),Object(a.jsxs)("div",{className:F.a.BottomContainer,children:[Object(a.jsx)(W,{noAssignments:L,loading:y,students:j.sort(),title:"Active students today"}),Object(a.jsx)(W,{noAssignments:L,loading:y,students:i.sort(),title:"Non-active students today"})]})]})};var J=function(){var e,t=h().isSignedIn,n=Object(o.useState)(!0),s=Object(r.a)(n,2),i=s[0],d=s[1];return Object(o.useEffect)((function(){setTimeout((function(){d(!1)}),1e3)}),[]),t?e=Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",component:B}),Object(a.jsx)(l.b,{path:"/courses/:id",component:R}),Object(a.jsx)(l.a,{to:"/"})]}):!1===t&&(e=Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/login",component:p}),Object(a.jsx)(l.a,{to:"/login"})]})),Object(a.jsx)(c.a.Fragment,{children:i?Object(a.jsx)("div",{children:"...Loading"}):e})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,200)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),c(e),s(e)}))},q=n(64),Z=n(93),X=n(47),$=n(69),ee="LOGIN",te={accessToken:null,authenticated:null,name:null},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object($.a)(Object($.a)({},e),{},{accessToken:t.token,name:t.name,authenticated:!0});default:return e}},ae=n(91),oe=Object(X.c)({auth:ne}),ce=Object(X.d)(oe,Object(X.a)(ae.a));i.a.render(Object(a.jsx)(Z.a,{store:ce,children:Object(a.jsx)(j,{children:Object(a.jsx)(q.a,{children:Object(a.jsx)(J,{})})})}),document.getElementById("root")),Q()},24:function(e,t,n){e.exports={Home:"Home_Home__1D5pe",Tiles:"Home_Tiles__1ouXY",Tile:"Home_Tile__2JqNK",NameContainer:"Home_NameContainer__1h_9e",Total:"Home_Total__1IKOY",Divider:"Home_Divider__2zdF9",TileTop:"Home_TileTop__3coDW",Date:"Home_Date__1zAHA",TileBottom:"Home_TileBottom__ES2C5",ViewAttendance:"Home_ViewAttendance__3goWm",Ellipse:"Home_Ellipse__2QbvV"}},40:function(e,t,n){e.exports={Panel:"Panel_Panel__3pOb2",Title:"Panel_Title__3c67K",Top:"Panel_Top__3pWdv",List:"Panel_List__2dS6k",ListItem:"Panel_ListItem__3IiSi"}},48:function(e,t,n){e.exports={Login:"Login_Login__3VIih",Button:"Login_Button__1C_rF",GoogleImgContainer:"Login_GoogleImgContainer__2_44v",GoogleImg:"Login_GoogleImg__1nc5O",Tag:"Login_Tag__1UqGT"}},49:function(e,t,n){e.exports={TopContainer:"CourseView_TopContainer__Ihnlz",GoBack:"CourseView_GoBack__1JBDk",Placeholder:"CourseView_Placeholder__KRyZU",CourseView:"CourseView_CourseView__QW3Nl",BottomContainer:"CourseView_BottomContainer__3d3Cr"}}},[[160,1,2]]]);
//# sourceMappingURL=main.aef2d399.chunk.js.map